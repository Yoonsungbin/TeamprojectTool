<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">

      <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
      Remove this if you use the .htaccess -->
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

      <title>ex</title>
      <meta name="description" content="">
      <meta name="author" content="sec">

      <meta name="viewport" content="width=device-width; initial-scale=1.0">

      <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
      <link rel="shortcut icon" href="/favicon.ico">
      <link rel="apple-touch-icon" href="/apple-touch-icon.png">

      <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-wip/css/bootstrap.min.css">
      <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
      <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-wip/js/bootstrap.min.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

      <style>
         * {
            box-sizing: border-box;
         }

         html {
            background: #FFFFFF;
            font-family: 'Helvetica Neue', 'Segoe UI', Sans-Serif;
            padding-top: 40px;
            padding-left: 30px;
         }
         .new {
            position: absolute;
            top: 50%;
            right: 50%;
            color: white;
            margin: 10px 30px 0 0;
            cursor: pointer;
         }
         .new:hover {
            color: #e67e22;
         }
         .card {
            position: absolute !important;
            width: 175px;
            height: 125px;
            background: #ecf0f1;
            box-shadow: 3px 3px 5px #aaa;
            border-radius: 5px;
         }
         .card .card-content {
            padding: 10px;
            height: 75px;
            font-size: .9em;
         }
         .card:hover {
            box-shadow: 3px 3px 5px #999;
            cursor: pointer;
         }

      </style>
      <script>
  $(document).ready(function() {
            //--------------------이미 생성된 메모 드래그--------------------------
            $appArea = $('body');
            $('card').each(function() {
               var self = this,
                   item = '<div class=\'card ' + '\'> <div class=\'card-content\'>' + self.text + '</div> </div>';
               $appArea.append(item);
            });
            $('.card').draggable({
               grid : [205, 155]
            });

            //모달로 메모를 입력받는 부분----------------------------------------
//Task Server receive
$.getJSON('/TaskAppend', function (data){
 var Work_Name = new Array();
   var Work_Dday = new Array();
   var Work_Memo = new Array();
   var Work_Finish = new Array();
   var Work_Person = new Array();
   var Work_Top = new Array();
   var Work_Left = new Array(); 
for(var i =0 ; i < data.length ; i ++){
    Work_Name[i] = data.Work_Name[i];	
    Work_Dday[i] = data.Work_Dday[i];
    Work_Memo[i] = data.Work_Memo[i];
    Work_Finish[i] = data.Work_Finish[i];
    Work_Person[i] = data.Work_Person[i].User_Name;
    Work_Top[i] = data.Work_Top[i];
    Work_Left[i] = data.Work_Left[i];
}
   var new_card = new Array();
   new_card.push({
      'name' : Work_Name,
      'dday' : Work_Dday,
      'member' : Work_Person,
      'memo' : Work_Memo,
      'x' : Work_Top,
      'y' : Work_Left
   });
   var text = "";
   $.each(new_card, function(index, item) {
      text += "<div class ='card' style='top: "+item.x+"; left: "+item.y+";'>";
      text += "<div class='card-content'>";
      text += "할 일 이름 : " + item.name;
      text += "<br>마감일 : " + item.dday;
      text += "<br>담당자 : " + item.member;
      text += "<br>내용 : " + item.memo;
      text += "</div></div>";
   });
   $('body').append(text);
   $('.card').draggable({
      grid : [205, 155]
   });
   $('.card').click(function() {
      $('#taskModal').modal(options);
   });
});
         });
</script>
   </head>

   <body>

      <div class="new" onclick="alert("taskmodal");">
         <a data-toggle="modal" href="#myModal" data-role="add">new</a>
      </div>
      <div class="card green ui-draggable" style="top: 40px; left: 30px;">
         <div class="card-content">
            "abcdefg"
         </div>
      </div>
      <div class="card green ui-draggable" style="top: 40px; left: 30px;">
         <div class="card-content">
            "abcdefg"
         </div>
      </div>

     
      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
         <div class="modal-dialog">
            <div class="modal-content">
               <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                     &times;
                  </button>
                  <h4 class="modal-title">해야 할 일 추가 하기</h4>
               </div>
               <div class="modal-body">
                  <div id="memo_form">
         <form id="formAddUser" name="register" method="post" action="/TaskAdd">
                     업무
                     <input type="text" name="Task_Name">
                     <br>
                     마감일
                     <input type="date" name="Task_Dday">
                     <br>
                     참여자
                     <input type="text" name="Task_Member">
                     <br>
                     메모
                     <input type="text" name="Task_Memo">
                     <br>
                     <input type="submit" id="save_btn" class="btn btn-primary" >
		</form>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- task modal -->
      <div class="modal fade" id="Task_Modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
         <div class="modal-dialog">
            <div class="modal-content">
               <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                     &times;
                  </button>
                  <h4 class="modal-title">할 일</h4>
               </div>
               <div class="modal-body">
                  <table id="show"></table>
               </div>
               <div>
                  <div class="modal-footer">
                     <button type="button" id="save_btn" class="btn btn-primary" data-dismiss="modal">
                        수정
                     </button>
                  </div>
               </div>
            </div><!--/.modal-content-->
         </div><!--/.modal-dialog-->
      </div><!--/.modal-->
   </body>
</html>
